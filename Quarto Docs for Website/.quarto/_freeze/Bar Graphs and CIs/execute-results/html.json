{
  "hash": "f3de61baee587f0fb5a5e0b25ed2350e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Bar Graphs and Confidence Intervals\"\nauthor: \"James Van Slyke\"\n---\n\n\n\n\n## An example to begin\n\nTo create this bar graph we'll start off with the dataset `Salaries`, which is from the package `carData`\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(Salaries, package = \"carData\")\n```\n:::\n\n\nTo begin, make sure you have downloaded, installed, and loaded the package carData and make sure you've loaded the tidyverse.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n### Check out Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(Salaries)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       rank discipline yrs.since.phd yrs.service  sex salary\n1      Prof          B            19          18 Male 139750\n2      Prof          B            20          16 Male 173200\n3  AsstProf          B             4           3 Male  79750\n4      Prof          B            45          39 Male 115000\n5      Prof          B            40          41 Male 141500\n6 AssocProf          B             6           6 Male  97000\n```\n\n\n:::\n:::\n\n\nThe dataset is about Professors and the salaries associated with different ranks. If you want to learn more about the dataset, remember you can type a question mark in front of it and R Studio will give you more information.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n?Salaries\n```\n:::\n\n\n### Summary Statistics\n\nTo create a bar graph, first you need to find summary statistics for the dataset. In this case you're going to find several descriptive statistics that will be used to make the graph.\n\nYou'll find mean, standard deviation, standard error, and the 95% Confidence interval.\n\nHere's the code to use:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nDesData <- Salaries |> \n  group_by(rank) |> \n  summarize(n=n(),\n            mean=mean(salary),\n            sd= sd(salary),\n            se=sd/sqrt(n),\n            ci=qt(0.975, df=n-1)*sd/sqrt(n))\n```\n:::\n\n\nCheck out the code here. First notice this symbol `|>`, which is the pipe. You can think of this symbol like a pipe or funnel. It funnels or pipes the dataset through various functions.\n\n### `group_by`\n\nSo we start with our dataset, *Salaries* and then we pipe it or funnel it by a particular variable. In this case we'll use the function `group_by` and the variable `rank`.\n\nThis variable will almost always be a factor or categorical variable.\n\nThen we use the *summarize* command to let R know what kinds of descriptive statistics we want.\n\n1.  n = number of cases\n2.  mean = mean\n3.  sd = standard deviation\n4.  se = standard error\n5.  ci = confidence interval\n\n## Basic Bar Graph\n\nLet's start with a simple bar chart of the means\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(DesData, \n       aes(x = rank, \n           y = mean)) +\n  geom_bar(stat = \"identity\")\n```\n\n::: {.cell-output-display}\n![](Bar-Graphs-and-CIs_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nNotice *geom_bar* is the geom we need for the bar chart\n\nWe have to use a special stat as well, *identity.* This means that bar height will be determined by the number provided by the variable assigned to the y axis. In this case the mean.\n\n## Error Bars\n\nNext, we'll add in error bars to bar chart, which is the *geom_errorbar*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(DesData, \n       aes(x = rank, \n           y = mean)) +\n  geom_bar(stat = \"identity\") +\n  geom_errorbar(aes(ymin=mean-se,\n                    ymax=mean+se))\n```\n\n::: {.cell-output-display}\n![](Bar-Graphs-and-CIs_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nWe can also change length of the error bars to make it look better.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(DesData, \n       aes(x = rank, \n           y = mean)) +\n  geom_bar(stat = \"identity\") +\n  geom_errorbar(aes(ymin=mean-se,\n                    ymax=mean+se), width=.8)\n```\n\n::: {.cell-output-display}\n![](Bar-Graphs-and-CIs_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n## Bells and whistles\n\nThen let's add in all the bells and whistles.\n\n1.  First let's add correct column labels for the rank variable\n2.  Second let's add more detail to the scale of the y variable\n3.  Finally let's add some better labels\n4.  For this one we'll use the standard error\n\nYou'll also need to add the library *scales* to get the proper symbol for dollars.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(scales)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'scales'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:purrr':\n\n    discard\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:readr':\n\n    col_factor\n```\n\n\n:::\n:::\n\n\nThen you can do the graph, we'll use the standard error for the confidence interval this time.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(DesData, \n       aes(x = factor(rank,\n                      labels = c(\"Assistant\\nProfessor\",\n                                 \"Associate\\nProfessor\",\n                                 \"Full\\nProfessor\")), \n           y = mean)) +\n  geom_bar(stat = \"identity\", \n           fill = \"cornflowerblue\") +\n  geom_errorbar(aes(ymin=mean-se,\n                    ymax=mean+se), width=.8) +\n  scale_y_continuous(breaks = seq(0, 130000, 20000), \n                     labels = dollar) +\n  labs(title = \"Mean Salary by Rank\", \n       subtitle = \"9-month academic salary for 2008-2009\",\n       x = \"\",\n       y = \"\")\n```\n\n::: {.cell-output-display}\n![](Bar-Graphs-and-CIs_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nThis time use the 95% Confidence Intervals\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(DesData, \n       aes(x = factor(rank,\n                      labels = c(\"Assistant\\nProfessor\",\n                                 \"Associate\\nProfessor\",\n                                 \"Full\\nProfessor\")), \n           y = mean)) +\n  geom_bar(stat = \"identity\", \n           fill = \"cornflowerblue\") +\n  geom_errorbar(aes(ymin=mean-ci,\n                    ymax=mean+ci), width=.5, size=1) +\n  scale_y_continuous(breaks = seq(0, 130000, 20000), \n                     labels = dollar) +\n  labs(title = \"Mean Salary by Rank\", \n       subtitle = \"9-month academic salary for 2008-2009\",\n       x = \"\",\n       y = \"\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nâ„¹ Please use `linewidth` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](Bar-Graphs-and-CIs_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "Bar-Graphs-and-CIs_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}