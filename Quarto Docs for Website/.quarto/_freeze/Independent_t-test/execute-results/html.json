{
  "hash": "0136c9b29e58a8985e796ae0918fe107",
  "result": {
    "markdown": "---\ntitle: \"Independent t test\"\nauthor: \"James Van Slyke\"\noutput:\n  html_document:\n    theme: darkly\n---\n\n::: {.cell}\n::: {.cell-output-display}\n```{=html}\n<script>\n  addClassKlippyTo(\"pre.r, pre.markdown\");\n  addKlippy('left', 'top', 'auto', '1', 'Copy code', 'Copied!');\n</script>\n```\n:::\n:::\n\n\n\n\nResources to consult Chapter 10 from Field, A. (2017). Discovering Statistics Using IBM SPSS Statistics (5th Edition). SAGE Publications, Ltd. (UK).\n\nSection from [Learning Statistics with R](https://learningstatisticswithr.com/book/ttest.html#studentttest)\n\nIn the section on probability we learned about the binomial distribution, which is a type of probability distribution. Probability distributions allow us to look at the probability of different types of outcomes. For example, the binomial distribution enables the calculation of the probability associated with getting say 6 heads out of 25 flips of a fair-sided coin.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndbinom(x = 6, size = 25, prob = 1/2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.005277991\n```\n:::\n:::\n\n\nFor the *t-test* we use the *t distribution* to analyze the probability of the outcome of a particular experiment. More specifically, an experiment with two groups. The t distribution is similar to the binomial distribution, but much closer to the *z distribution* that we learned about in the section on the normal curve and z scores.\n\n### T Distribution\n\nPagano (2013) provides a good definition of the t distribution.\n\n> The sampling distribution of t is a probability distribution of the t values that would occur if all possible different samples of a fixed size N were drawn from the null-hypothesis population. It gives (1) all the possible different t values for samples of size N and (2) the probability of getting each value if sampling is random from the null-hypothesis population p. 329\n\nLet's try to unpack this a bit. First off, it's a probability distribution constructed of *t values* or *t scores* based on all possible samples drawn from a population. Remember that *samples* are a smaller group taken from a *population*. The \"fixed size N\" refers to the size of the sample that was taken in the experiment, so the distribution will change it's shape slightly based on N.\n\nAlthough the t distribution is based on the sample size, it's actually constructed by using a somewhat complicated mathematical concept called *degrees of freedom* or *df*. Degrees of freedom refers to how many scores are free to vary for a given statistic. Rather, than go too far into the weeds with this concept, for now just know that the degrees of freedom for the independent t test is $N - 2$.\n\nSo if we had a sample size of 30, we would use a *t distribution* of $df=30 - 2$ or $df=28$ to construct the distribution.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Independent_t-test_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nThe t distribution changes shape based on the degrees of freedom (df) that is associated with it, which is related to the sample size.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Independent_t-test_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nNotice that the t distribution has the same shape as a normal curve, plus it looks like the z distribution with a mean of zero and positive values above the mean and negative values below the mean. Just like with the z distribution as the absolute value of the t score increases (remember that absolute value looks at the score and ignores the +/- sign), it is associated with a lower probability. Each t score has a particular probability associated with it.\n\n### Using the Independent t test\n\nThe independent t test is used when analyzing the difference in means between two separate groups. Typically, this is used to analyze the difference between the control group (group who did not receive the independent variable) and the experimental group (group who did receive the independent variable).\n\n> Null Hypothesis - Experimental Group = Control Group\n\n> Alternative Hypothesis - Experimental Group $\\neq$ Control Group\n\nThe null hypothesis assumes that the mean difference between the two groups is equal to zero. If the samples came from the same population, their means would be roughly the same and if they came from the same population their characteristics would be the same as well. Thus, the null hypothesis assumes no real differences based on the presence of the independent variable, while the alternative hypothesis assumes that the two means are different. $$\nNull = \\bar X_{1} = \\bar X_{2}\n$$\n\n$$\nAlternative = \\bar X_{1} \\neq \\bar X_{2}\n$$\n\nThis type of design is sometimes referred as a *between-groups* or *independent* design. It requires a categorical (nominal) predictor or independent variable that will specify the two groups (experimental and control) and a continuous dependent variable that specifies the outcome.\n\nThere are two possible reasons why two samples have different means.\n\n1.  The two sample means come from the same population, but the existence of measurement error and variability are the reason they are different. (Null hypothesis)\n2.  The two sample means come from different populations, which have different characteristics, and reflect a genuine difference between the sample means. (Alternative hypothesis)\n\n### Independent t test formula\n\nRemember the basic formula used in most statistical situations\n\n$$\nStatistic = \\frac{Signal}{Noise}\n$$\n\nThe signal refers to systematic variation or variation caused by the experimental manipulation and the work of the independent variable. If the independent variable has an effect we'll expect there to be a difference between the means. Noise refers to background noise or unsystematic variation. Variation we don't manipulate or don't have control over, like measurement error.\n\nThus, the formula for the t test can be represented as:\n\n$$\nt = \\frac{difference\\;between\\; sample\\;means}{\\;measurement\\; error}\n$$\n\nBasically, the difference between the means is what we would expect if the independent variable has an effect. There should be some difference in the dependent variable that is a measure the effect of the independent variable. This is then compared to the measurement error. Remember that all statistical calculation contains some amount of error, but the difference between the means has to be greater that than measurement error in order to be considered statistically significant. So the numerator in the formula is simply the difference between the means of the two groups or $\\bar X_{1}-\\bar X _{2}$.\n\nAs an estimate of the measurement error, the t test uses the standard deviation from the *sample* divided by the square root of n to calculate the measurement error. This is a form of the standard deviation, which was shown earlier as a descriptive statistic of measurement error. This statistic is known as the *estimate of the standard error*. So here is what our formula looks like now.\n\n$$t = \\frac{\\bar X_{1}-\\bar X _{2}}{estimate\\; of\\; the\\; \\;standard\\; error}\n$$\n\nHowever we need estimates from both sample 1 and sample 2 so the denominator of the equation looks like this: $$\n\\sqrt{\\frac{s^{2}_{1}}{n_{1}}+\\frac{s^{2}_{2}}{n_{2}} }\n$$\n\nFinally, we can put everything together for the primary formula.$$\nt = \\frac{X_{1}-X_{2}}{\\sqrt{\\frac{s^{2}_{1}}{n_{1}}+\\frac{s^{2}_{2}}{n_{2}} }}\n$$\n\nOverall, for the independent t-test, if the mean difference between the two samples is significantly greater than the measurement error in the two samples (which is found by using the estimated standard error), there is a real difference between the two samples.\n\n## Independent t-test example\n\nFor the t test example, we'll use a dataset based on a fictional experiment involving Harry Potter and the cloak of invisibility. The cloak of invisibility if the one of the deathly hallows and a gift that Harry received in year one at Hogwarts. When a person puts on the cloak they are invisible to everyone and can run around the castle doing whatever kinds of mischief then can imagine.\n\nSo the experiment involves the use of the cloak and if persons act more mischievous when they wear it. So let's lay out the particulars of the experiment.\n\n> Independent variable (IV) = The Cloak\n>\n> Dependent variable (DV) = Acts of mischief\n\nSince this is an independent t test there will be 2 groups.\n\n> Group 1 - Experimental Group - Wears the cloak of invisibility\n>\n> Group 2 - Control Group - Does not wear a cloak of invisibility\n\nThis would call for two hypotheses.\n\n> Null Hypothesis - Wearing the invisibility cloak does not increase mischievous acts\n>\n> Alternative Hypothesis - Wearing the invisibility cloak increases mischievous acts\n\nThe experimental assumptions would be:\n\n> Null hypothesis -\\> Group 1 = Group 2 or $\\bar X_{1}=\\bar X _{2}$\n>\n> Alternative Hypothesis -\\> Group 1 $\\neq$ Group 2 or $\\bar X_{1}\\neq\\bar X _{2}$\n\n## Get Dataset\n\n1.  First Step, upload dataset from SPSS\n2.  Get data set named \"Invisibility\" from SPSS datasets\n3.  Use *import dataset* tool under the environment tab\n4.  Find file called *invisibility.sav*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(haven)\nInvisibility <- read_sav(\"Invisibility.sav\")\nView(Invisibility)\n```\n:::\n\n\nInspect variables\n\n\n::: {.cell}\n\n```{.r .cell-code}\nInvisibility$Cloak\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<labelled<double>[24]>: Cloak of invisibility\n [1] 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1\n\nLabels:\n value    label\n     0 No Cloak\n     1    Cloak\n```\n:::\n\n```{.r .cell-code}\nInvisibility$Mischief\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] 3 1 5 4 6 4 6 2 0 5 4 5 4 3 6 6 8 5 5 4 2 5 7 5\nattr(,\"label\")\n[1] \"Mischievous Acts\"\nattr(,\"format.spss\")\n[1] \"F8.0\"\n```\n:::\n:::\n\n\nTo begin, let's analyze some descriptive statistics based on the \"Invisibility\" dataset and create a bar graph to have a first estimate as to whether there is a difference between the groups.\n\nThe first step is to create a second dataset with your descriptive variables. We'll use the `dplyr` package to do this, which is part of tidyverse.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nInvis_Descriptives <- Invisibility %>%\n  group_by(Cloak) %>%\n  summarize(n = n(),\n            mean = mean(Mischief),\n            sd = sd(Mischief),\n            se = sd / sqrt(n),\n            ci = qt(0.975, df = n - 1) * sd / sqrt(n))\nInvis_Descriptives\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 6\n  Cloak            n  mean    sd    se    ci\n  <dbl+lbl>    <int> <dbl> <dbl> <dbl> <dbl>\n1 0 [No Cloak]    12  3.75  1.91 0.552  1.22\n2 1 [Cloak]       12  5     1.65 0.477  1.05\n```\n:::\n:::\n\n\nNotice the basic structure of the code. We use the \"filter\" or \"pipe\" function to filter the dataset based on the two groups and then find all the important descriptive statistics we need. When we take a closer look at this dataset a few things should be of interest.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nInvis_Descriptives\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 6\n  Cloak            n  mean    sd    se    ci\n  <dbl+lbl>    <int> <dbl> <dbl> <dbl> <dbl>\n1 0 [No Cloak]    12  3.75  1.91 0.552  1.22\n2 1 [Cloak]       12  5     1.65 0.477  1.05\n```\n:::\n:::\n\n\nThe first thing we should notice is that the mean number of mischievous acts without the cloak is 3.75, while the mean number of mischievous acts with the cloak is 5.00. Remember the assumption of the alternative hypothesis.\n\n> Alternative Hypothesis - Group 1 $\\neq$ Group 2 or $\\bar X_{1}\\neq\\bar X _{2}$\n\nAnd this is what we find when we compare the two means\n\n$$\n3.75\\neq 5.00\n$$\n\nThis is also demonstrated with a basic bar graph as well.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Invis_Descriptives, \n       aes(x = Cloak, \n           y = mean)) +\n  geom_bar(stat = \"identity\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nDon't know how to automatically pick scale for object of type haven_labelled/vctrs_vctr/double. Defaulting to continuous.\n```\n:::\n\n::: {.cell-output-display}\n![](Independent_t-test_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nSo it does look like there is a difference between these two groups. The question remains, is the difference *statistically significant*. Thinking back to the t-test equation, is the mean difference significantly more than the measurement error to produce a t score that is associated with a low probability?\n\n$$\nt = \\frac{5.00-3.75}{measurement\\; error}\n$$\n\nRemember in this case, the measurement error statistic we are using is the estimated standard error, so the formula looks like this:\n\n$$\nt = \\frac{5.00-3.75}{estimated\\; standard\\; error}\n$$\n\nTo find the estimated standard error, the formula is:\n\n$$\n\\sqrt{\\frac{s^{2}_{1}}{n_{1}}+\\frac{s^{2}_{2}}{n_{2}} }\n$$ If we were going to run the t score calculation by hand it would look like this:\n\n$$\nt = \\frac{5.00-3.75}{\\sqrt{\\frac{1.91^2}{12}+\\frac{1.65^2}{12 }}}\n$$So we could do the t test by hand using r\n\n\n::: {.cell}\n\n```{.r .cell-code}\n(3.75-5.00)/(sqrt(1.91^2/12 + 1.65^2/12))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] -1.715578\n```\n:::\n:::\n\n\nRather than needing to run the calculation by hand, we can use r to the the calculation for us using the `t.test()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nt.test(Mischief ~ Cloak, data = Invisibility)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tWelch Two Sample t-test\n\ndata:  Mischief by Cloak\nt = -1.7135, df = 21.541, p-value = 0.101\nalternative hypothesis: true difference in means between group 0 and group 1 is not equal to 0\n95 percent confidence interval:\n -2.764798  0.264798\nsample estimates:\nmean in group 0 mean in group 1 \n           3.75            5.00 \n```\n:::\n:::\n\n\nSo we can see that the t score is -1.71 and the corresponding p value is .1007. The p value is *greater* than alpha or greater than .05. Thus, we fail to reject the null and our experiment does not support the idea that a cloak of invisibility increases acts of mischief.\n\nThe degrees of freedom (df) is 22, so the t distribution would take on a shape that looks like this:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Independent_t-test_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\nHere's a graph that shows the area for rejection of the Null (p value \\< .05) or retaining the null (p value \\> .05). Notice that the t score that is the start of the rejection area for the Null is 1.72, which is just slightly bigger than 1.71 which is the t score associated with the outcome in the invisibility cloak experiment, which makes sense since the p value was .1007 only .05 away from the alpha level.\n\n\n\n\n\nThe other statistic that will be a part of the conclusion is the *effect size*, which is a measurement of the magnitude of the results obtained in the experiment. Effect sizes can be used to compare the magnitude of this experiment to others and it has become standard practice to include an effect size with any statistical results.\n\nIn this case, we'll use \\*cohen's d\\* as a measure of the effect size. The formula for *Cohen's d* is to Subtract the means from each other and then divide by the standard deviation of the control group.\n\nWe can bring up our descriptive statistics if we need to remember the means and standard deviations.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nInvis_Descriptives\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 6\n  Cloak            n  mean    sd    se    ci\n  <dbl+lbl>    <int> <dbl> <dbl> <dbl> <dbl>\n1 0 [No Cloak]    12  3.75  1.91 0.552  1.22\n2 1 [Cloak]       12  5     1.65 0.477  1.05\n```\n:::\n:::\n\n\nSo for *Cohen's d*\n\n\n::: {.cell}\n\n```{.r .cell-code}\nCohens_d <- (5.00-3.75)/1.91\nCohens_d\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.6544503\n```\n:::\n:::\n\n\n#### Bar Graph for t Test\n\nEarlier, we looked at a basic bar graph that showed a difference between the means. However, a key piece of information was missing from this graph, confidence intervals. Let's go ahead and add those in.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Invis_Descriptives, \n       aes(x = Cloak, \n           y = mean)) +\n  geom_bar(stat = \"identity\") +\n  geom_errorbar(aes(ymin=mean-ci,\n                    ymax=mean+ci))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nDon't know how to automatically pick scale for object of type haven_labelled/vctrs_vctr/double. Defaulting to continuous.\n```\n:::\n\n::: {.cell-output-display}\n![](Independent_t-test_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\nRemember that confidence intervals show a range or interval for values of the population mean based on a sample. For an Independent t test, if the independent variable has a real effect, we would expect that the two samples come from *different populations*, rather than the *same population*. When the confidence intervals *overlap* as they do in the chart above that means that there is a substantial chance that these samples came from the same population. If the confidence intervals *do not overlap* there is a much smaller chance that they came from the same population, thus the independent variable is more likely to have had an effect.\n\nWe use confidence intervals, p values, and effect sizes to analyze an experiment. A p value may be below .05, but the confidence intervals may still be touching, so all parts of the analysis are helpful.\n\nWe can add in labels to improve the look of our chart. We've added labels to our factor variable and labels for the title and x and y variables.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Invis_Descriptives, \n       aes(x = factor(Cloak, labels=c(\"No Cloak\", \"Cloak\")),\n           y = mean)) +\n  geom_bar(stat = \"identity\") +\n  geom_errorbar(aes(ymin=mean-ci,\n                    ymax=mean+ci)) +\n  labs(title = \"Mean Number of Mischievious Acts with or without Cloak\", \n       y=\"Mean Number of Mischievious Acts\", x=\"Were They Wearing a Cloak?\")\n```\n\n::: {.cell-output-display}\n![](Independent_t-test_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nNext let's add some color to our chart\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(Invis_Descriptives, \n       aes(x = factor(Cloak, labels=c(\"No Cloak\", \"Cloak\")),\n           y = mean)) +\n  theme_minimal() +\n  geom_bar(stat = \"identity\", fill=\"cornflowerblue\") +\n  geom_errorbar(aes(ymin=mean-ci,\n                    ymax=mean+ci), width=.3, size=1) +\n  labs(title = \"Mean Number of Mischievious Acts with or without Cloak\", \n       y=\"Mean Number of Mischievious Acts\", x=\"Were They Wearing a Cloak?\")\n```\n\n::: {.cell-output-display}\n![](Independent_t-test_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n### Writing up the Results\n\nHere is how to write up the results for this experiment including all the relevant information. Of course, it's also important to include the bar graph as well.\n\n#### Results\n\n> On average, participants given a cloak of invisibility engaged in more acts of mischief (M = 5, SE = 0.48), than those not given a cloak (M = 3.75, SE = 0.55). This difference, 1.25, 95% CI[-2.76, 0.26], was not significant t(21.54) = −1.71, p = 0.101. However, it did represent a medium-sized effect d = 0.65.\\*\n\nSteps to writing results\n\n1.  Write out the means and include standard error\n2.  Write out the difference between the means (Subtract the sample means) and the confidence intervals for the difference, which is a part of the r output.\n3.  t(df)= t score, p value, Cohen's d\n",
    "supporting": [
      "Independent_t-test_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/clipboard-1.7.1/clipboard.min.js\"></script>\n<link href=\"site_libs/primer-tooltips-1.4.0/build.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/klippy-0.0.0.9500/css/klippy.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/klippy-0.0.0.9500/js/klippy.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}