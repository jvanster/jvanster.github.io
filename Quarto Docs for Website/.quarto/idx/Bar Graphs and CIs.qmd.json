{"title":"Bar Graphs and Confidence Intervals","markdown":{"yaml":{"title":"Bar Graphs and Confidence Intervals","author":"James Van Slyke"},"headingText":"An example to begin","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nlibrary(tidyverse)\nlibrary(carData)\n```\n\n\nTo create this bar graph we'll start off with the dataset `Salaries`, which is from the package `carData`\n\n```{r, eval=TRUE}\ndata(Salaries, package = \"carData\")\n```\n\nTo begin, make sure you have downloaded, installed, and loaded the package carData and make sure you've loaded the tidyverse.\n\n```{r, eval=FALSE}\nlibrary(tidyverse)\n```\n\n### Check out Data\n\n```{r, eval=TRUE}\nhead(Salaries)\n```\n\nThe dataset is about Professors and the salaries associated with different ranks. If you want to learn more about the dataset, remember you can type a question mark in front of it and R Studio will give you more information.\n\n```{r}\n?Salaries\n```\n\n### Summary Statistics\n\nTo create a bar graph, first you need to find summary statistics for the dataset. In this case you're going to find several descriptive statistics that will be used to make the graph.\n\nYou'll find mean, standard deviation, standard error, and the 95% Confidence interval.\n\nHere's the code to use:\n\n```{r}\nDesData <- Salaries |> \n  group_by(rank) |> \n  summarize(n=n(),\n            mean=mean(salary),\n            sd= sd(salary),\n            se=sd/sqrt(n),\n            ci=qt(0.975, df=n-1)*sd/sqrt(n))\n```\n\nCheck out the code here. First notice this symbol `|>`, which is the pipe. You can think of this symbol like a pipe or funnel. It funnels or pipes the dataset through various functions.\n\n### `group_by`\n\nSo we start with our dataset, *Salaries* and then we pipe it or funnel it by a particular variable. In this case we'll use the function `group_by` and the variable `rank`.\n\nThis variable will almost always be a factor or categorical variable.\n\nThen we use the *summarize* command to let R know what kinds of descriptive statistics we want.\n\n1.  n = number of cases\n2.  mean = mean\n3.  sd = standard deviation\n4.  se = standard error\n5.  ci = confidence interval\n\n## Basic Bar Graph\n\nLet's start with a simple bar chart of the means\n\n```{r, eval=TRUE}\nggplot(DesData, \n       aes(x = rank, \n           y = mean)) +\n  geom_bar(stat = \"identity\")\n```\n\nNotice *geom_bar* is the geom we need for the bar chart\n\nWe have to use a special stat as well, *identity.* This means that bar height will be determined by the number provided by the variable assigned to the y axis. In this case the mean.\n\n## Error Bars\n\nNext, we'll add in error bars to bar chart, which is the *geom_errorbar*\n\n```{r, eval=TRUE}\nggplot(DesData, \n       aes(x = rank, \n           y = mean)) +\n  geom_bar(stat = \"identity\") +\n  geom_errorbar(aes(ymin=mean-se,\n                    ymax=mean+se))\n```\n\nWe can also change length of the error bars to make it look better.\n\n```{r, eval=TRUE}\nggplot(DesData, \n       aes(x = rank, \n           y = mean)) +\n  geom_bar(stat = \"identity\") +\n  geom_errorbar(aes(ymin=mean-se,\n                    ymax=mean+se), width=.8)\n```\n\n## Bells and whistles\n\nThen let's add in all the bells and whistles.\n\n1.  First let's add correct column labels for the rank variable\n2.  Second let's add more detail to the scale of the y variable\n3.  Finally let's add some better labels\n4.  For this one we'll use the standard error\n\nYou'll also need to add the library *scales* to get the proper symbol for dollars.\n\n```{r, eval=TRUE}\nlibrary(scales)\n```\n\nThen you can do the graph, we'll use the standard error for the confidence interval this time.\n\n```{r, eval=TRUE}\nggplot(DesData, \n       aes(x = factor(rank,\n                      labels = c(\"Assistant\\nProfessor\",\n                                 \"Associate\\nProfessor\",\n                                 \"Full\\nProfessor\")), \n           y = mean)) +\n  geom_bar(stat = \"identity\", \n           fill = \"cornflowerblue\") +\n  geom_errorbar(aes(ymin=mean-se,\n                    ymax=mean+se), width=.8) +\n  scale_y_continuous(breaks = seq(0, 130000, 20000), \n                     labels = dollar) +\n  labs(title = \"Mean Salary by Rank\", \n       subtitle = \"9-month academic salary for 2008-2009\",\n       x = \"\",\n       y = \"\")\n```\n\nThis time use the 95% Confidence Intervals\n\n```{r, eval=TRUE}\nggplot(DesData, \n       aes(x = factor(rank,\n                      labels = c(\"Assistant\\nProfessor\",\n                                 \"Associate\\nProfessor\",\n                                 \"Full\\nProfessor\")), \n           y = mean)) +\n  geom_bar(stat = \"identity\", \n           fill = \"cornflowerblue\") +\n  geom_errorbar(aes(ymin=mean-ci,\n                    ymax=mean+ci), width=.5, size=1) +\n  scale_y_continuous(breaks = seq(0, 130000, 20000), \n                     labels = dollar) +\n  labs(title = \"Mean Salary by Rank\", \n       subtitle = \"9-month academic salary for 2008-2009\",\n       x = \"\",\n       y = \"\")\n```\n","srcMarkdownNoYaml":"\n\n```{r setup, include=FALSE}\nlibrary(tidyverse)\nlibrary(carData)\n```\n\n## An example to begin\n\nTo create this bar graph we'll start off with the dataset `Salaries`, which is from the package `carData`\n\n```{r, eval=TRUE}\ndata(Salaries, package = \"carData\")\n```\n\nTo begin, make sure you have downloaded, installed, and loaded the package carData and make sure you've loaded the tidyverse.\n\n```{r, eval=FALSE}\nlibrary(tidyverse)\n```\n\n### Check out Data\n\n```{r, eval=TRUE}\nhead(Salaries)\n```\n\nThe dataset is about Professors and the salaries associated with different ranks. If you want to learn more about the dataset, remember you can type a question mark in front of it and R Studio will give you more information.\n\n```{r}\n?Salaries\n```\n\n### Summary Statistics\n\nTo create a bar graph, first you need to find summary statistics for the dataset. In this case you're going to find several descriptive statistics that will be used to make the graph.\n\nYou'll find mean, standard deviation, standard error, and the 95% Confidence interval.\n\nHere's the code to use:\n\n```{r}\nDesData <- Salaries |> \n  group_by(rank) |> \n  summarize(n=n(),\n            mean=mean(salary),\n            sd= sd(salary),\n            se=sd/sqrt(n),\n            ci=qt(0.975, df=n-1)*sd/sqrt(n))\n```\n\nCheck out the code here. First notice this symbol `|>`, which is the pipe. You can think of this symbol like a pipe or funnel. It funnels or pipes the dataset through various functions.\n\n### `group_by`\n\nSo we start with our dataset, *Salaries* and then we pipe it or funnel it by a particular variable. In this case we'll use the function `group_by` and the variable `rank`.\n\nThis variable will almost always be a factor or categorical variable.\n\nThen we use the *summarize* command to let R know what kinds of descriptive statistics we want.\n\n1.  n = number of cases\n2.  mean = mean\n3.  sd = standard deviation\n4.  se = standard error\n5.  ci = confidence interval\n\n## Basic Bar Graph\n\nLet's start with a simple bar chart of the means\n\n```{r, eval=TRUE}\nggplot(DesData, \n       aes(x = rank, \n           y = mean)) +\n  geom_bar(stat = \"identity\")\n```\n\nNotice *geom_bar* is the geom we need for the bar chart\n\nWe have to use a special stat as well, *identity.* This means that bar height will be determined by the number provided by the variable assigned to the y axis. In this case the mean.\n\n## Error Bars\n\nNext, we'll add in error bars to bar chart, which is the *geom_errorbar*\n\n```{r, eval=TRUE}\nggplot(DesData, \n       aes(x = rank, \n           y = mean)) +\n  geom_bar(stat = \"identity\") +\n  geom_errorbar(aes(ymin=mean-se,\n                    ymax=mean+se))\n```\n\nWe can also change length of the error bars to make it look better.\n\n```{r, eval=TRUE}\nggplot(DesData, \n       aes(x = rank, \n           y = mean)) +\n  geom_bar(stat = \"identity\") +\n  geom_errorbar(aes(ymin=mean-se,\n                    ymax=mean+se), width=.8)\n```\n\n## Bells and whistles\n\nThen let's add in all the bells and whistles.\n\n1.  First let's add correct column labels for the rank variable\n2.  Second let's add more detail to the scale of the y variable\n3.  Finally let's add some better labels\n4.  For this one we'll use the standard error\n\nYou'll also need to add the library *scales* to get the proper symbol for dollars.\n\n```{r, eval=TRUE}\nlibrary(scales)\n```\n\nThen you can do the graph, we'll use the standard error for the confidence interval this time.\n\n```{r, eval=TRUE}\nggplot(DesData, \n       aes(x = factor(rank,\n                      labels = c(\"Assistant\\nProfessor\",\n                                 \"Associate\\nProfessor\",\n                                 \"Full\\nProfessor\")), \n           y = mean)) +\n  geom_bar(stat = \"identity\", \n           fill = \"cornflowerblue\") +\n  geom_errorbar(aes(ymin=mean-se,\n                    ymax=mean+se), width=.8) +\n  scale_y_continuous(breaks = seq(0, 130000, 20000), \n                     labels = dollar) +\n  labs(title = \"Mean Salary by Rank\", \n       subtitle = \"9-month academic salary for 2008-2009\",\n       x = \"\",\n       y = \"\")\n```\n\nThis time use the 95% Confidence Intervals\n\n```{r, eval=TRUE}\nggplot(DesData, \n       aes(x = factor(rank,\n                      labels = c(\"Assistant\\nProfessor\",\n                                 \"Associate\\nProfessor\",\n                                 \"Full\\nProfessor\")), \n           y = mean)) +\n  geom_bar(stat = \"identity\", \n           fill = \"cornflowerblue\") +\n  geom_errorbar(aes(ymin=mean-ci,\n                    ymax=mean+ci), width=.5, size=1) +\n  scale_y_continuous(breaks = seq(0, 130000, 20000), \n                     labels = dollar) +\n  labs(title = \"Mean Salary by Rank\", \n       subtitle = \"9-month academic salary for 2008-2009\",\n       x = \"\",\n       y = \"\")\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"Bar Graphs and CIs.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.42","editor":"visual","theme":{"light":"minty","dark":"darkly"},"title":"Bar Graphs and Confidence Intervals","author":"James Van Slyke"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}